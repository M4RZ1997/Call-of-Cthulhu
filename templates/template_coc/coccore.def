\ExplSyntaxOn

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package Dependencies
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Helps prevent option clash with other packages that include xcolor
\PassOptionsToPackage {table} {xcolor}

\RequirePackage {array}
\RequirePackage {colortbl}
\RequirePackage {enumitem}
\RequirePackage {etoolbox}
\RequirePackage {textcomp}				% degree symbol for italian ordinals
\RequirePackage {hang}					% hanging paragraphs
\RequirePackage [np] {numprint}				% localization of thousands separator
\RequirePackage {tabularx}				% variable-width table columns
\RequirePackage [breakable,skins,xparse]{tcolorbox}	% styled text boxes
\RequirePackage {tikz}					% drawing ornaments and lines
\RequirePackage {xcolor}
\RequirePackage {xparse}				% \NewDocumentCommand and expl3

\sys_if_engine_luatex:T
{
	\RequirePackage {luacolor}
}

\bool_if:NT \l__coc_layout_bool
{
	\RequirePackage {geometry}
	\RequirePackage {microtype}				% Improve ragged2e hyphenation and overfull boxes
	\RequirePackage {ragged2e}
	\RequirePackage [titles] {tocloft}		% multi-column toc
	\RequirePackage [newparttoc] {titlesec}	% Used to adjust (sub)section, part, and table of contents formatting
	
	\bool_if:NT \l__coc_multitoc_bool
		{ \RequirePackage [toc] {multitoc} }

	% Set Page Geometry
	\geometry
	{
		hmargin		= .75in,	% Left and right margins
		top			= .46in,	% Top of text area to top of page
		bottom		= .8in,		% Bottom of text area to bottom of page
		footskip	= .32in,	% Bottom of text area to bottom of footer text
		columnsep	= .33in,	% Space between columns
	}
	
	% Set paragraph and line spacing
	\setlength {\parindent}            {1em}
	\setlength {\RaggedRightRightskip} {0pt plus 1em}
	\setlength {\RaggedRightParindent} {\parindent}

	% Restrict hyphenation
	\tolerance			= 1
	\emergencystretch	= \maxdimen
	\hyphenpenalty		= 10000
	\hbadness			= 10000

	% Set left justification if not justified
	\bool_if:NF \l__coc_justified_bool
		{ \RaggedRight }

	% Customize itemize environment.
	\setlist{leftmargin=1em}
	\setitemize{noitemsep,topsep=0.5ex,label=\footnotesize{\textbullet}}
}

% Load other modules of this package after all dependencies to avoid load order
% conflicts (e.g., package options).
% Low-level modules first.
\RequirePackage {\PATH templates/template_coc/lib/compat}		% compatibility definitions
\RequirePackage {\PATH templates/template_coc/lib/cocutility}	% utility functions
\RequirePackage {\PATH templates/template_coc/lib/coccolors}	% color definitions
\RequirePackage {\PATH templates/template_coc/lib/cocfonts}		% font definitions
\RequirePackage {\PATH templates/template_coc/lib/cocstrings}	% Load document strings

% Main modules in alphabetical order
%\RequirePackage {\PATH templates/template_coc/lib/coccomment}	% inline comment boxes
\RequirePackage {\PATH templates/template_coc/lib/cocheader}	% fancy headers and footers
%\RequirePackage {\PATH templates/template_coc/lib/cocmonster}	% stat blocks
%\RequirePackage {\PATH templates/template_coc/lib/cocreadaloud}	% read-aloud text
%\RequirePackage {\PATH templates/template_coc/lib/cocsections}	% section styling and special section headers
%\RequirePackage {\PATH templates/template_coc/lib/cocsidebar}	% sidebars
%\RequirePackage {\PATH templates/template_coc/lib/coctable}		% tables
%\RequirePackage {\PATH templates/template_coc/lib/coctoc}		% table of contents styling